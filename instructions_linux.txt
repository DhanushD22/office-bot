Prerequisites

Run these commands to prepare your system:

sudo apt update
sudo apt install -y build-essential git cmake pkg-config libopencv-dev python3-opencv

Step 1: Install Vulkan (Optional)

If your system supports Vulkan (GPU acceleration):

sudo add-apt-repository universe
sudo apt update
sudo apt install -y vulkan-tools libvulkan-dev

To test Vulkan Installation:

vulkaninfo | less

Step 2: Clone and Build NCNN

cd ~
git clone https://github.com/Tencent/ncnn.git
cd ncnn
git submodule update --init --recursive
mkdir build && cd build
cmake -DNCNN_VULKAN=OFF .. # Set to ON if Vulkan is supported
make -j$(nproc)
sudo make install
sudo ldconfig

Check Installation:

ls /usr/local/include/ncnn
ls /usr/local/lib | grep ncnn

You should see header files and libncnn.a / libncnn.so.

Step3: Clone Face Recognition Project

cd ~
git clone https://github.com/DhanushD22/office-bot.git
cd office-bot/Face-Recognition

Step 4: Create CMakeLists.txt

Create a file named CMakeLists.txt in the main project folder:

gedit CMakeLists.txt

Paste the below content:

"""
cmake_minimum_required(VERSION 3.10)
project(FaceRecognition)
 
set(CMAKE_CXX_STANDARD 14)
set(CMAKE_BUILD_TYPE Release)
 
# Include directories
include_directories(
    ${CMAKE_SOURCE_DIR}/include
    /usr/local/include/ncnn
    /usr/include/opencv4
)
 
# Find OpenCV
find_package(OpenCV REQUIRED)
 
# Source files
file(GLOB SRC_FILES ${CMAKE_SOURCE_DIR}/src/*.cpp)
 
# Create executable
add_executable(FaceRecognition ${SRC_FILES})
 
# Link libraries
target_link_libraries(FaceRecognition
    ${OpenCV_LIBS}
    ncnn
    pthread
    dl
    gomp
)

"""


Step5: Build the project

mkdir build && cd build
cmake ..
make -j$(nproc)

The output binary will be: 

build/FaceRecognition

Step6: Inside Build folder:
Copy the models folder in the main project directory into build 
And inside build create a folder named 'img' and add some known faces into it

Step6: Run the application

cd build/
./FaceRecognition

Expected output:

OpenCV Version: 4.5.x
Trying to recognize faces
Using Retina
Test living or fake face
Automatic adding strangers to database
Blur filter - only sharp images to database
Found 1 pictures in database.
